
<!DOCTYPE html>
<html>
  <head>
    <script src="https://rawgithub.com/smart-on-fhir/client-js/master/dist/fhir-client.js"></script>
    <h1>Observation Results for <span id="name"></h1>
    <script>
        var smart = FHIR.client({
      serviceUrl: 'https://sb-fhir-dstu2.smarthealthit.org/api/smartdstu2/data',
      patientId: 'SMART-smart-613876'
          });
      
      function getPatientName(pt) {
            if (pt.name) {
                var names = pt.name.map(function(name) {
                    return name.given.join(" ") + " " + name.family.join(" ");
                });
                return names.join(" / ");
            } else {
                return "anonymous";
            }

      function displayPatient (pt) {
            document.getElementById('name').innerHTML = getPatientName(pt);
        }
      smart.patient.api.search({type: 'Condition'});
      FHIR.oauth2.ready(function(smart){
            smart.patient.read().then(function(pt) {
                displayPatient (pt);
            });
    </script>
  </head>
   </body>
</html>
